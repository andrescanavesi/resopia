extends layout

block content
    h1.mx-1=recipe.title
    span.mx-1.text-muted=recipe.created_at_es
    - var img = recipe.featured_image_url
    if isMobile
        - img = recipe.featured_image_url_mobile
    img.lozad(data-src=img, alt='imagen receta').img-fluid
    .mx-1.mt-3
      span.text-muted=recipe.description
    div#giphyWrapper.mt-1.text-center
        img#giphyGif.lozad(data-src='https://res.cloudinary.com/dniiru5xy/image/upload/c_thumb,w_512,g_face/v1577674089/resopia.com/gif-button.png', 
        onclick="loadGiphy(); trackEvent(this,'giphy_discover')", style="cursor: pointer").img-fluid

    h2.mx-1.mt-3 Ingredientes
    ul.list-group.list-group-flush
      each ingr in recipe.ingredients_array
        li(style="cursor: pointer", onclick="trackEvent(this,'ingredients'); activateElem(this)").list-group-item= ingr
    if recipe.has_extra_ingredients
      h3.mx-1.mt-3=recipe.extra_ingredients_title
      ul.list-group.list-group-flush
        each extra_ingr in recipe.extra_ingredients_array
          li(style="cursor: pointer", onclick="trackEvent(this,'ingredients'); activateElem(this)").list-group-item= extra_ingr
    
    - var img = recipe.secondary_image_url
    if isMobile
        - img = recipe.secondary_image_url_mobile
    img.lozad(data-src=img, alt='imagen receta').img-fluid
    h2.mx-1.mt-1 Elaboración 
    img.lozad.ml-1(data-src='/images/clock.svg', width="20px", alt="imagen reloj")
    span.text-muted.ml-2=recipe.total_time
    #steps
      ol.list-group.list-group-flush.list-group-ol.mt-2
        each step in recipe.steps_array
          li(style="cursor: pointer", onclick="trackEvent(this,'recipe_steps'); activateElem(this)").list-group-item.list-group-item-ol= step
    if recipe.has_notes
      .border.border-dark.rounded.mt-1.p-4.bg-light.mx-2
        h2 Tips para preparar esta receta
        span.pl-2=recipe.notes
    .mt-1.p-4.mx-2.text-center.h3
      span#rating1.fa.fa-star.text-warning(onclick="rateRecipe(this,1);")
      span#rating2.fa.fa-star.ml-1.text-warning(onclick="rateRecipe(this,2)")
      span#rating3.fa.fa-star.ml-1.text-warning(onclick="rateRecipe(this,3)")
      span#rating4.fa.fa-star.ml-1.text-warning(onclick="rateRecipe(this,4)")
      span#rating5.fa.fa-star.ml-1(onclick="rateRecipe(this,5)")
      span (#{recipe.rating_count})
    if recipe.has_youtube_video
      h2.mx-1.mt-3 Video receta
      - var youtube_video_embed_url = recipe.youtube_video_embed_url
      .mt-3.youtube-video-place(data-yt-url=youtube_video_embed_url)
        img#youtubeVideoImage.lozad(data-src='/images/youtube-thumbnail.jpg', 
        onclick="loadYoutubeVideo(); trackEvent(this,'youtube_video_display')").play-youtube-video.img-fluid

    //social icons for sharing
    .bg-light.text-center.py-3.mt-2.mx-2
      a#facebookShare(data-pin-do='buttonFacebook', href=recipe.facebookSharingUrl+'?utm_source=facebook&utm_medium=web&utm_campaign=recipe-detail',
        onclick="trackEvent(this,'social')").btn.btn-facebook.btn-social
        span.pl-2.text-white Facebook (#{recipe.facebook_shares})
      a#pinterestShare(data-pin-do='buttonPin', href=recipe.pinterestSharingUrl+'?utm_source=pinterest&utm_medium=web&utm_campaign=recipe-detail',
        onclick="trackEvent(this,'social')").ml-1.btn.btn-pinterest.btn-social
        span.pl-2.text-white Pin (#{recipe.pinterest_pins})
      a.d-none#twitterShare(data-pin-do='buttonTwitter', href=recipe.twitterSharingUrl,
        onclick="trackEvent(this,'social')").ml-1.btn.btn-twitter.btn-social
        span.pl-2.text-white Tweet (#{recipe.tweets})
      a#whastappShare(data-pin-do='buttonWhatsapp', href=recipe.whatsappSharingUrl+'?utm_source=whatsapp&utm_medium=web&utm_campaign=recipe-detail',
        onclick="trackEvent(this,'social')").ml-1.btn.btn-whatsapp.btn-social
        span.pl-2.text-white Whatsapp
    .bg-light.border.mt-2.mx-2
      .d-flex.justify-content-center.py-4
        each tag in recipe.tags
          span.ml-1
            a(href=`/recetas/${tag.name_seo}`, title="Ver mas recetas de esta categoría").badge.badge-pill.badge-info.py-2.px-3
              span=tag.name    